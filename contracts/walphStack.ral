Contract WalphStack(
    contractAddressOwner: ByteVec,
    zeroAddress: Address,
    stackSize: U256,
    mut attendees: [Address;100],
    mut index: U256
){

    event AddressPushed(address: Address)
    event AddressPopped(address: Address)

    enum ErrorCodes {
        StackEmpty = 0
        StackFull = 1
        InvalidCaller = 2
        OutOfBound = 3
    }

    pub fn getIndex() -> (U256){
        return index
    }

    pub fn getElementByIndex(index: U256) -> (Address){
        assert!(index < stackSize, ErrorCodes.OutOfBound)

        return attendees[index]
    }

    @using(updateFields = true)
    pub fn pop() -> (Address) {
        checkCaller!(callerAddress!() == contractAddressOwner, ErrorCodes.InvalidCaller)
        
        assert!(index > 0, ErrorCodes.StackEmpty)

        let addressPopped = attendees[index]
        attendees[index] = zeroAddress
        index = index - 1

        emit AddressPopped(addressPopped)

        return addressPopped
    }

    @using(updateFields = true)
    pub fn push(address: Address) -> (){
        checkCaller!(callerAddress!() == contractAddressOwner, ErrorCodes.InvalidCaller)

        assert!(index < stackSize, ErrorCodes.StackFull)
        
        attendees[index] = address
        index = index + 1

        emit AddressPushed(address)
    }

    @using(updateFields = true)
    pub fn resetIndex() -> (){
        checkCaller!(callerAddress!() == contractAddressOwner, ErrorCodes.InvalidCaller)

        index = 0

    }

}